-- timeline.html --
{% assign title = "Public Timeline" %}
{% if username %}
    {% assign title = username + "'s Timeline" %}
{% endif %}

<h2>{{ title }}</h2>

{% if g.user %}
    {% if username == g.user.username %}
        <p>This is your timeline!</p>
    {% elif followed %}
        <p>You are following {{ username }}. <a href="/{{ username }}/unfollow">Unfollow</a></p>
    {% else %}
        <p>You are not following {{ username }}. <a href="/{{ username }}/follow">Follow</a></p>
    {% endif %}
{% endif %}

{% assign msg_count = 0 %}
<ul>
    {% for msg in messages %}
    {% if msg != null and msg.username != null %}
    <li>
        <strong><a href="/{{ msg.username }}">{{ msg.username }}</a></strong>: {{ msg.text }}
    </li>
    {% endif %}
    {% else %}
    <li><em>No messages yet.</em></li>
    {% endfor %}
</ul>